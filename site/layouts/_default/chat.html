{{ define "page-head" }}
<!-- Firebase -->
<script src="/__/firebase/8.2.6/firebase-app.js" defer></script>
<script src="/__/firebase/8.2.6/firebase-firestore.js" defer></script>
<script src="/__/firebase/init.js?useEmulator=true" defer></script>

<!-- WebRTC Adapter -->
<script src="{{ `/chat/js/adapter.js` | relURL }}" defer></script>

<link rel="stylesheet" href="{{ `/chat/css/styles.css` | relURL }}">

<script src="{{ `/chat/js/script.js` | relURL }}" defer></script>
{{ end }}

{{ define "nav" }}
<header class="navbar">
    <section class="navbar-section">
        <a href="{{ `/` | relURL }}" class="navbar-brand mr-2 main-brand">
          <img src="{{ `/img/pearmo-logo-color.png` | relURL }}" alt="Pearmo logo">
          <h5>Pearmo</h5>
        </a>
    </section>

    <!-- Room id -->
    <section class="navbar-center">
        <div class="input-group input-inline">
            <span class="input-group-addon">Room ID:</span>
            <input id="room-id-input" type="text" class="form-input" placeholder="Joinable room id">
            <button id="share-id-btn" class="btn btn-primary input-group-btn">Share</button>
        </div>
    </section>

    <!-- User info -->
    <section class="navbar-section">
        <figure id="user-avatar" class="avatar" data-initial="UN"></figure>
    </section>
</header>
{{end}}

{{ define "main-content" }}
<!-- Room Actions -->
<section id="room-actions">
    <button id="create-room" class="btn btn-primary">Create Room</button>
    <button id="join-room" class="btn btn-primary">Join Room</button>
    <button id="hang-up" class="btn btn-primary" disabled>Hang up</button>
</section>

<!-- Stream Options -->
<form id="stream-options">
    <div class="form-group">
        <label class="form-switch form-inline">
            <input type="checkbox" id="audio-enabled" name="audio-enabled">
            <i class="form-icon"></i>Audio
        </label>
        <label class="form-switch form-inline">
            <input type="checkbox" id="video-enabled" name="video-enabled">
            <i class="form-icon"></i>Video
        </label>
        <label class="form-switch form-inline">
            <input type="checkbox" id="screen-share-enabled" name="screen-share-enabled">
            <i class="form-icon"></i>Screen Share
        </label>

        <button id="more-options" class="btn btn-action float-right">
            <i class="icon icon-more-vert"></i>
        </button>
    </div>
</form>

<!-- Communication Area -->
<section id="comm-area" class="columns">
    <!-- Stream(s) -->
    <div id="stream-area" class="column col-9 col-md-12 bg-gray"></div>

    <!-- Video template -->
    <template id="template-video">
        <div class="video-container-single">
            <div class="chip stream-user">Username</div>
            <video autoplay playsinline controls></video>
        </div>
    </template>

    <!-- Chat -->
    <div id="chat-area" class="column col-12 col-md-12 bg-secondary">
        <div id="messages-container"></div>
        <textarea id="message-input" class="form-input" name="message" placeholder="Message"></textarea>
        <div id="send-area">
            <span></span>
            <small class="text-primary">Shortcut: Control+Enter</small>
            <button id="send" class="btn btn-primary" disabled>Send</button>
        </div>
    </div>

    <!-- Message templates -->
    <template id="template-msg">
        <div class="message">
            <p class="msg-username text-primary text-tiny">Username</p>
            <p class="msg-content">Message content</p>
        </div>
    </template>
    <template id="template-msg-self">
        <div class="message msg-self">
            <p class="msg-username text-primary text-tiny">Username</p>
            <p class="msg-content">Message content</p>
        </div>
    </template>
    <template id="template-msg-info">
        <div class="message msg-info">
            <p class="msg-content text-tiny text-center text-muted">Message content</p>
        </div>
    </template>
</section>

<!-- Help Info -->
<details>
    <summary>Help</summary>
    <h6>Sharing the room</h6>
    <p>Click the Share button to email the room link or copy the room id.</p>

    <h6>Room size limit</h6>
    <p>Each room supports up to 4 participants. This may change in the future.</p>

    <h6>Selecting Video &amp; Audio input</h6>
    <p>Select the Video and Audio input devices by clicking the More (<i class="icon icon-more-vert"></i>) button.</p>
</details>

<div class="toast">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</div>

<!-- Share Modal -->
<div id="share-modal" class="modal modal-sm">
    <a href="#close" class="modal-overlay close-modal" aria-label="Close"></a>
    <div class="modal-container">
        <div class="modal-body">
            <div class="content">
                <p id="share-room-id">Room ID</p>
                <button id="share-gmail" class="btn btn-link">share with Gmail</button>
                <button id="share-default" class="btn btn-link">share with default</button>
                <button id="share-copy-link" class="btn btn-link">copy link</button>
                <button id="share-copy" class="btn btn-link">copy</button>
            </div>
        </div>
    </div>
</div>

<!-- Create Username Modal -->
<div id="username-modal" class="modal modal-sm">
    <a href="#close" class="modal-overlay close-modal" aria-label="Close"></a>
    <div class="modal-container">
        <div class="modal-header">
            <a href="#close" class="btn btn-clear float-right close-modal" aria-label="Close"></a>
            <div class="modal-title h5">Create a username</div>
        </div>

        <div class="modal-body">
            <div class="content">
                <p>Create a temporary username for this chat.</p>
                <input class="form-input" type="text" id="username" placeholder="username" autocomplete="off">
                <p class="form-input-hint"></p>
            </div>
        </div>

        <div class="modal-footer">
            <button id="create-username" class="btn btn-primary" disabled>Create</button>
            <a class="btn btn-link close-modal" href="#close" aria-label="Close">Close</a>
        </div>
    </div>
</div>

<!-- Input Device Modal -->
<div id="input-device-modal" class="modal modal-sm">
    <a href="#close" class="modal-overlay close-modal" aria-label="Close"></a>
    <div class="modal-container">
        <div class="modal-header">
            <a href="#close" class="btn btn-clear float-right close-modal" aria-label="Close"></a>
            <div class="modal-title h5">Input Devices</div>
        </div>
    
        <div class="modal-body">
            <div class="content">
                <form id="input-device-options">
                    <div class="form-group">
                        <label for="video-device" class="form-label">Video</label>
                        <select id="video-device" name="video-device" class="form-select">
                            <option>Auto</option>
                            <option>Off</option>
                            <option>Default</option>
                        </select>

                        <label for="audio-device" class="form-label">Audio</label>
                        <select id="audio-device" name="audio-device" class="form-select" style="margin-bottom: 1em;">
                            <option>Auto</option>
                            <option>Off</option>
                            <option>Default</option>
                        </select>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{{ end }}